---
- hosts: web-servers
  gather_facts: no
  become: yes
  vars:
    ruby_version: 2.5.1
    python_version: 3.5.2
    node_version: 6.9.1
    cert_fqdn: staging.my-ope.net
    myope_api_url:
      production: https://app.my-ope.net
      staging: https://staging.my-ope.net
  vars_files:
    - private.yml
  roles:
    - { role: 'users', tags: 'users' }
    - base
    - { role: 'rbenv', tags: 'ruby' }
    - pyenv
    - ndenv
    - { role: 'nginx', tags: 'nginx' }
    - mysql
    - app
    - mecab
    - logrotate
    - { role: awslogs, when: stage == 'production' }
